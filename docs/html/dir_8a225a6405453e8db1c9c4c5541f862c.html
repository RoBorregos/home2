<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Roborregos @Home documentation: /home/deivideich/roborregos/home_ws/src/home2/manipulation/packages/xarm_ros2 Directory Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Roborregos @Home documentation<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">Class documentation for the Roborregos @Home project</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('dir_8a225a6405453e8db1c9c4c5541f862c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">xarm_ros2 Directory Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-subdirs" class="groupheader"><a id="subdirs" name="subdirs"></a>
Directories</h2></td></tr>
<tr class="memitem:demo" id="r_demo"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_2f30461fa21c09ea32e5db7e3a7e5f68.html">demo</a></td></tr>
<tr class="memitem:thirdparty" id="r_thirdparty"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_9fbaeede1ce6dccaaa10552dd99a95ad.html">thirdparty</a></td></tr>
<tr class="memitem:uf_5Fros_5Flib" id="r_uf_5Fros_5Flib"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_887d95640dea878cfa9c4860c04280d5.html">uf_ros_lib</a></td></tr>
<tr class="memitem:xarm_5Fapi" id="r_xarm_5Fapi"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_f0fddb17c8c52d86679b9946d1589656.html">xarm_api</a></td></tr>
<tr class="memitem:xarm_5Fcontroller" id="r_xarm_5Fcontroller"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_69692d47dd69be426273fcc33fb2d06c.html">xarm_controller</a></td></tr>
<tr class="memitem:xarm_5Fdescription" id="r_xarm_5Fdescription"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_68349daac24e35be1ca1b3b902f0a1fe.html">xarm_description</a></td></tr>
<tr class="memitem:xarm_5Fgazebo" id="r_xarm_5Fgazebo"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_c29c688387bf3268ecd5387ac7d1b579.html">xarm_gazebo</a></td></tr>
<tr class="memitem:xarm_5Fmoveit_5Fconfig" id="r_xarm_5Fmoveit_5Fconfig"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_de89d33c979576fd8da2d3cb8ed8824d.html">xarm_moveit_config</a></td></tr>
<tr class="memitem:xarm_5Fmoveit_5Fservo" id="r_xarm_5Fmoveit_5Fservo"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_2b4c41bdec15daffdd61757493265288.html">xarm_moveit_servo</a></td></tr>
<tr class="memitem:xarm_5Fmsgs" id="r_xarm_5Fmsgs"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_9cbadedba195ff2b3d88e477dacf7634.html">xarm_msgs</a></td></tr>
<tr class="memitem:xarm_5Fplanner" id="r_xarm_5Fplanner"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_bbf6e25d7d85fd4aa8aa5364b11b650d.html">xarm_planner</a></td></tr>
<tr class="memitem:xarm_5Fsdk" id="r_xarm_5Fsdk"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_78c7e04c3b501c05423af6dfe024cca5.html">xarm_sdk</a></td></tr>
<tr class="memitem:xarm_5Fvision" id="r_xarm_5Fvision"><td class="memItemLeft" align="right" valign="top"><span class="iconfolder"><div class="folder-icon"></div></span>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dir_1e11923f773156484f91a223a038c870.html">xarm_vision</a></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<h1 class="doxsection"><a class="anchor" id="autotoc_md54"></a>
xarm_ros2</h1>
<p>For simplified Chinese version: <a class="el" href="md__2home_2deivideich_2roborregos_2home__ws_2src_2home2_2manipulation_2packages_2xarm__ros2_2ReadMe__cn.html">简体中文版</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md55"></a>
1. Introduction</h1>
<p>&ensp;&ensp;&ensp;&ensp;This repository contains simulation models, and corresponding motion planning and controlling demos of the xArm series from UFACTORY. The development and test environment is as follows</p><ul>
<li>Ubuntu 20.04 + ROS Foxy</li>
<li>Ubuntu 20.04 + ROS Galactic</li>
<li>Ubuntu 22.04 + ROS Humble</li>
<li>Ubuntu 24.04 + ROS Jazzy</li>
<li>Ubuntu 22.04 + ROS Rolling</li>
</ul>
<p>&ensp;&ensp;&ensp;&ensp;Please switch to the corresponding code branch according to different ros2 versions (no corresponding code branch means it has not been tested in this version)</p><ul>
<li>Foxy: <a href="https://github.com/xArm-Developer/xarm_ros2/tree/foxy">foxy</a></li>
<li>Galactic: <a href="https://github.com/xArm-Developer/xarm_ros2/tree/galactic">galactic</a></li>
<li>Humble: <a href="https://github.com/xArm-Developer/xarm_ros2/tree/humble">humble</a></li>
<li>Jazzy: <a href="https://github.com/xArm-Developer/xarm_ros2/tree/jazzy">jazzy</a></li>
<li>Rolling: <a href="https://github.com/xArm-Developer/xarm_ros2/tree/rolling">rolling</a></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md56"></a>
2. Update History</h1>
<ul>
<li>moveit dual arm control (under single rviz GUI), each arm can be separately configured（e.g. DOF, add_gripper, etc）</li>
<li>add support for Gazebo simulation, can be controlled by moveit.</li>
<li>support adding customized tool model. <br  />
</li>
<li>(2022-09-07) Change the parameter type of service (<b>set_tgpio_modbus_timeout</b>/__getset_tgpio_modbus_data__), and add parameters to support transparent transmission</li>
<li>(2022-09-07) Change topic name (xarm_states to robot_states)</li>
<li>(2022-09-07) Update submodule xarm-sdk to version 1.11.0</li>
<li>(2022-09-09) [Beta]Support Humble version</li>
<li>(2022-10-10) <a class="el" href="namespacexarm__api.html">xarm_api</a> adds some services</li>
<li>(2022-12-15) Add parameter <span class="tt">add_realsense_d435i</span> to load RealSense D435i camera model and support gazebo simulation</li>
<li>(2023-03-29) Added the launch parameter <span class="tt">model1300</span> (default is false), and replaced the model of the end of the xarm robot arm with the 1300 series</li>
<li>(2023-04-20) Update the URDF file, adapt to ROS1 and ROS2, and load the inertia parameters of the link from the configuration file according to the SN</li>
<li>(2023-04-20) Added the launch parameter <span class="tt">add_d435i_links</span> (default is false), which supports adding the link relationship between D435i cameras when loading the RealSense D435i model. It is only useful when <span class="tt">add_realsense_d435i</span> is true</li>
<li>(2023-04-20) Lite6 supports <span class="tt">add_realsense_d435i</span> and <span class="tt">add_d435i_links</span> parameters</li>
<li>(2023-04-20) Added the launch parameter <span class="tt">robot_sn</span>, supports loading the inertia parameters of the corresponding joint link, and automatically overrides the <span class="tt">model1300</span> parameters</li>
<li>(2023-04-20) Added launch parameters <span class="tt">attach_to</span>/<span class="tt">attach_xyz</span>/<span class="tt">attach_rpy</span> to support attaching the robot arm model to other models</li>
<li>(2023-06-07) Added support for UFACTORY850 robotic arm</li>
<li>(2023-10-12) Added the generation and use of joint kinematics parameter files</li>
<li>(2024-01-17) Added support for xarm7_mirror model robotic arm</li>
<li>(2024-02-27) Added support for Bio Gripper (parameter <span class="tt">add_bio_gripper</span>, Lite6 is not supported)</li>
<li>(2024-04-12) Added <b><a class="el" href="namespaceuf__ros__lib.html">uf_ros_lib</a></b> to encapsulate certain functions for calling (including <b>MoveItConfigsBuilder</b>), see <a class="el" href="Readme_8md.html">Documentation</a></li>
<li>(2024-10-11) Added <a class="el" href="readme_8md.html">mbot_demo</a> to demonstrate how to build a xarm robot on the chassis</li>
<li>(2024-11-05) Support Jazzy version</li>
<li>(2024-12-02) Add detailed ReadMe instructions for <a class="el" href="namespacexarm__api.html">xarm_api</a> wrapped services.</li>
<li>(2025-05-28) Add xarm_vision</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md57"></a>
3. Preparation</h1>
<ul>
<li>### 3.1 Install <a href="https://docs.ros.org/">ROS2</a><ul>
<li><a href="https://docs.ros.org/en/ros2_documentation/foxy/Installation.html">Foxy</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/galactic/Installation.html">Galactic</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/humble/Installation.html">Humble</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/jazzy/Installation.html">Jazzy</a></li>
</ul>
</li>
<li>### 3.2 Install <a href="https://moveit.ros.org/install-moveit2/binary/">Moveit2</a> <br  />
</li>
<li>### 3.3 Install <a href="https://classic.gazebosim.org/tutorials?tut=install_ubuntu">Gazebo</a> <br  />
</li>
<li>### 3.4 Install <a href="http://gazebosim.org/tutorials?tut=ros2_installing&amp;cat=connect_ros">gazebo_ros_pkgs</a> <br  />
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md58"></a>
4. How To Use</h1>
<ul>
<li>### 4.1 Create a workspace <div class="fragment"><div class="line"># Skip this step if you already have a target workspace</div>
<div class="line">$ cd ~</div>
<div class="line">$ mkdir -p dev_ws/src</div>
</div><!-- fragment --></li>
<li>### 4.2 Obtain source code of "xarm_ros2" repository <div class="fragment"><div class="line"># Remember to source ros2 environment settings first</div>
<div class="line">$ cd ~/dev_ws/src</div>
<div class="line"># DO NOT omit &quot;--recursive&quot;，or the source code of dependent submodule will not be downloaded.</div>
<div class="line"># Pay attention to the use of the -b parameter command branch, $ROS_DISTRO indicates the currently activated ROS version, if the ROS environment is not activated, you need to customize the specified branch (foxy/galactic/humble)</div>
<div class="line">$ git clone https://github.com/xArm-Developer/xarm_ros2.git --recursive -b $ROS_DISTRO</div>
</div><!-- fragment --></li>
<li>### 4.3 Update "xarm_ros2" repository <div class="fragment"><div class="line">$ cd ~/dev_ws/src/xarm_ros2</div>
<div class="line">$ git pull</div>
<div class="line">$ git submodule sync</div>
<div class="line">$ git submodule update --init --remote</div>
</div><!-- fragment --></li>
<li>### 4.4 Install dependencies <div class="fragment"><div class="line"># Remember to source ros2 environment settings first</div>
<div class="line">$ cd ~/dev_ws/src/</div>
<div class="line">$ rosdep update</div>
<div class="line">$ rosdep install --from-paths . --ignore-src --rosdistro $ROS_DISTRO -y</div>
</div><!-- fragment --></li>
<li>### 4.5 Build xarm_ros2 <div class="fragment"><div class="line"># Remember to source ros2 and moveit2 environment settings first</div>
<div class="line">$ cd ~/dev_ws/</div>
<div class="line"># build all packages</div>
<div class="line">$ colcon build</div>
<div class="line"> </div>
<div class="line"># build selected packages</div>
<div class="line">$ colcon build --packages-select xarm_api</div>
</div><!-- fragment --></li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md59"></a>
5. Package Introduction</h1>
<p><b>Reminder 1: If there are multiple people using ros2 in the current LAN, in order to avoid mutual interference, please set ROS_DOMAIN_ID</b> <br  />
</p><ul>
<li><a href="https://docs.ros.org/en/ros2_documentation/foxy/Concepts/About-Domain-ID.html">Foxy</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/galactic/Concepts/About-Domain-ID.html">Galactic</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/humble/Concepts/About-Domain-ID.html">Humble</a></li>
<li><a href="https://docs.ros.org/en/ros2_documentation/jazzy/Concepts/About-Domain-ID.html">Jazzy</a></li>
</ul>
<p><b>Reminder 2： Remember to source the environment setup script before running any applications in xarm_ros2</b> <br  />
</p>
<div class="fragment"><div class="line">$ cd ~/dev_ws/</div>
<div class="line">$ source install/setup.bash</div>
</div><!-- fragment --><p> <b>Reminder 3： All following instructions will base on xArm6，please use proper parameters or filenames for xArm5 or xArm7</b> <br  />
 <b>Reminder 4: The &lt;hw_ns&gt; described below is replaced with the actual one, the xarm series defaults is xarm, and the rest defaults is ufactory</b> <br  />
</p>
<ul>
<li>### 5.1 xarm_description This package contains robot description files and 3D models of xArm. Models can be displayed in RViz by the following launch file: <div class="fragment"><div class="line">$ cd ~/dev_ws/</div>
<div class="line"># set &#39;add_gripper=true&#39; to attach xArm gripper model</div>
<div class="line"># set &#39;add_vacuum_gripper=true&#39; to attach xArm vacuum gripper model</div>
<div class="line"># Notice：Only one end_effector can be attached (set to &#39;true&#39;).</div>
<div class="line">$ ros2 launch xarm_description xarm6_rviz_display.launch.py [add_gripper:=true] [add_vacuum_gripper:=true]</div>
</div><!-- fragment --></li>
<li>### 5.2 xarm_msgs <br  />
 This package contains all interface definitions for xarm_ros2, please check the instructions in the files before using them. <a class="el" href="xarm__msgs_2ReadMe_8md.html">README</a></li>
<li>### 5.3 xarm_sdk This package serves as a submodule of this project，the corresponding git repository is: <a href="https://github.com/xArm-Developer/xArm-CPLUS-SDK.git">xArm-CPLUS-SDK</a>, for interfacing with real xArms, please refer to the documentation in "xArm-CPLUS-SDK" if interested.</li>
<li>### 5.4 <a class="el" href="namespacexarm__api.html">xarm_api</a> This package is a ros wrapper of "xarm_sdk"，functions are implemented as ros service or ros topic，communications with real xArm in "xarm_ros2" are based on the services and topics provided in this part. All the services and topics are under &lt;hw_ns&gt;/ namespace，e.g. full name for "joint_states" is actually "&lt;hw_ns&gt;/joint_states". <br  />
<ul>
<li><b>services</b>: the name of provided services are the same with the corresponding function in SDK, however, whether to activate the service is up to the configuration under the "services" domain in <span class="tt">xarm_api/config/xarm_params.yaml</span> and <span class="tt">xarm_api/config/xarm_user_params.yaml</span>. The defined service can only be activated at initialization if that service is configured to <span class="tt">true</span>. If you need to customize the parameters, please create a file <span class="tt">xarm_api/config/xarm_user_params.yaml</span> to modify, the format, refer to <span class="tt">xarm_api/config/xarm_params.yaml</span>. <span class="tt">
        services:
            motion_enable: true
            set_mode: true
            set_state: true
            clean_conf: false
            ...
        </span></li>
<li><p class="startli"><b>topics</b>: <br  />
</p>
<p class="startli"><b>joint_states</b>: is of type <b>sensor_msgs::msg::JointState</b> <br  />
</p>
<p class="startli"><b>robot_states</b>: is of type <b>xarm_msgs::msg::RobotMsg</b> <br  />
</p>
<p class="startli"><b>xarm_cgpio_states</b>: is of type <b>xarm_msgs::msg::CIOState</b> <br  />
</p>
<p class="startli"><b>uf_ftsensor_raw_states</b>: is of type <b>geometry_msgs::msg::WrenchStamped</b> <br  />
</p>
<p class="startli"><b>uf_ftsensor_ext_states</b>: is of type <b>geometry_msgs::msg::WrenchStamped</b> <br  />
</p>
<p class="startli"><b>Note:</b>: some of the topics are only available when specific <b>report_type</b> is set at launch stage. Refer <a href="https://github.com/xArm-Developer/xarm_ros#report_type-argument">here</a>. <br  />
</p>
</li>
<li><p class="startli"><b>Launch and test (xArm)</b>: <br  />
</p>
<p class="startli"><span class="tt">bash
        $ cd ~/dev_ws/
@section autotoc_md60 launch xarm_driver_node
        $ ros2 launch <a class="el" href="namespacexarm__api.html">xarm_api</a> <a class="el" href="xarm6__driver_8launch_8py.html">xarm6_driver.launch.py</a> robot_ip:=192.168.1.117
@section autotoc_md61 service test
        $ ros2 run <a class="el" href="namespacexarm__api.html">xarm_api</a> test_xarm_ros_client
@section autotoc_md62 topic test
        $ ros2 run <a class="el" href="namespacexarm__api.html">xarm_api</a> test_robot_states
        </span></p>
</li>
<li><p class="startli"><b>Use command line (xArm)</b>:</p>
<p class="startli">```bash $ cd ~/dev_ws/ </p>
</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md63"></a>
launch xarm_driver_node:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__api.html">xarm_api</a> <a class="el" href="xarm6__driver_8launch_8py.html">xarm6_driver.launch.py</a> robot_ip:=192.168.1.117</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md64"></a>
enable all joints:</h1>
<p>$ ros2 service call /xarm/motion_enable xarm_msgs/srv/SetInt16ById "{id: 8, data: 1}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md65"></a>
set proper mode (0) and state (0)</h1>
<p>$ ros2 service call /xarm/set_mode xarm_msgs/srv/SetInt16 "{data: 0}" $ ros2 service call /xarm/set_state xarm_msgs/srv/SetInt16 "{data: 0}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md66"></a>
Cartesian linear motion: (unit: mm, rad)</h1>
<p>$ ros2 service call /xarm/set_position xarm_msgs/srv/MoveCartesian "{pose: [300, 0, 250, 3.14, 0, 0], speed: 50, acc: 500, mvtime: 0}" <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md67"></a>
joint motion for xArm6: (unit: rad)</h1>
<p>$ ros2 service call /xarm/set_servo_angle xarm_msgs/srv/MoveJoint "{angles: [-0.58, 0, 0, 0, 0, 0], speed: 0.35, acc: 10, mvtime: 0}" ```</p>
<ul>
<li><p class="startli"><b>Use command line (lite6)</b>:</p>
<p class="startli">```bash $ cd ~/dev_ws/ </p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md68"></a>
launch ufactory_driver_node:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__api.html">xarm_api</a> <a class="el" href="lite6__driver_8launch_8py.html">lite6_driver.launch.py</a> robot_ip:=192.168.1.161</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md69"></a>
enable all joints:</h1>
<p>$ ros2 service call /ufactory/motion_enable xarm_msgs/srv/SetInt16ById "{id: 8, data: 1}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md70"></a>
set proper mode (0) and state (0)</h1>
<p>$ ros2 service call /ufactory/set_mode xarm_msgs/srv/SetInt16 "{data: 0}" $ ros2 service call /ufactory/set_state xarm_msgs/srv/SetInt16 "{data: 0}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md71"></a>
Cartesian linear motion: (unit: mm, rad)</h1>
<p>$ ros2 service call /ufactory/set_position xarm_msgs/srv/MoveCartesian "{pose: [250, 0, 250, 3.14, 0, 0], speed: 50, acc: 500, mvtime: 0}" <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md72"></a>
joint motion: (unit: rad)</h1>
<p>$ ros2 service call /ufactory/set_servo_angle xarm_msgs/srv/MoveJoint "{angles: [-0.58, 0, 0, 0, 0, 0], speed: 0.35, acc: 10, mvtime: 0}" ```</p>
<ul>
<li><p class="startli"><b>Use command line (UFACTORY850)</b>:</p>
<p class="startli">```bash $ cd ~/dev_ws/ </p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md73"></a>
launch ufactory_driver_node:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__api.html">xarm_api</a> <a class="el" href="uf850__driver_8launch_8py.html">uf850_driver.launch.py</a> robot_ip:=192.168.1.181</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md74"></a>
enable all joints:</h1>
<p>$ ros2 service call /ufactory/motion_enable xarm_msgs/srv/SetInt16ById "{id: 8, data: 1}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md75"></a>
set proper mode (0) and state (0)</h1>
<p>$ ros2 service call /ufactory/set_mode xarm_msgs/srv/SetInt16 "{data: 0}" $ ros2 service call /ufactory/set_state xarm_msgs/srv/SetInt16 "{data: 0}"</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md76"></a>
Cartesian linear motion: (unit: mm, rad)</h1>
<p>$ ros2 service call /ufactory/set_position xarm_msgs/srv/MoveCartesian "{pose: [250, 0, 250, 3.14, 0, 0], speed: 50, acc: 500, mvtime: 0}" <br  />
</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md77"></a>
joint motion: (unit: rad)</h1>
<p>$ ros2 service call /ufactory/set_servo_angle xarm_msgs/srv/MoveJoint "{angles: [-0.58, 0, 0, 0, 0, 0], speed: 0.35, acc: 10, mvtime: 0}" ```</p>
<p>Note: please study the meanings of <a href="https://github.com/xArm-Developer/xarm_ros#6-mode-change">Mode</a>, State and available motion instructions before testing on the real robot. Please note <b>the services provided by xArm series and Lite 6 have different namespaces</b>. <br  />
 For <b>detailed service instructions</b>, refer to the <a class="el" href="xarm__api_2ReadMe_8md.html">ReadMe</a> inside <span class="tt"><a class="el" href="namespacexarm__api.html">xarm_api</a></span> folder. <br  />
</p>
<ul>
<li><p class="startli">### 5.5 xarm_controller This package defines the hardware interface for real xArm control under ros2. <br  />
</p>
<div class="fragment"><div class="line">$ cd ~/dev_ws/</div>
<div class="line"># For xArm(xarm6 as example): set &#39;add_gripper=true&#39; to attach xArm gripper model</div>
<div class="line">$ ros2 launch xarm_controller xarm6_control_rviz_display.launch.py robot_ip:=192.168.1.117 [add_gripper:=true]</div>
<div class="line"> </div>
<div class="line"># For lite6: set &#39;add_gripper=true&#39; to attach Lite6 gripper model</div>
<div class="line">$ ros2 launch xarm_controller lite6_control_rviz_display.launch.py robot_ip:=192.168.1.161 [add_gripper:=true]</div>
<div class="line"> </div>
<div class="line"># For UFACTORY850: set &#39;add_gripper=true&#39; to attach xarm gripper model</div>
<div class="line">$ ros2 launch xarm_controller uf850_control_rviz_display.launch.py robot_ip:=192.168.1.181 [add_gripper:=true]</div>
</div><!-- fragment --></li>
<li>### 5.6 xarm_moveit_config This package provides abilities for controlling xArm/Lite6 (simulated or real arm) by moveit.<ul>
<li><p class="startli">【simulated】Launch moveit, controlling robot in rviz. <br  />
</p>
<p class="startli">``&lsquo;bash $ cd ~/dev_ws/ </p>
</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md78"></a>
For xArm(xarm6 as example): set 'add_gripper=true&rsquo; to attach xArm gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="xarm6__moveit__fake_8launch_8py.html">xarm6_moveit_fake.launch.py</a> [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md79"></a>
For Lite6: set 'add_gripper=true' to attach Lite6 gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="lite6__moveit__fake_8launch_8py.html">lite6_moveit_fake.launch.py</a> [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md80"></a>
For UFACTORY850: set 'add_gripper=true' to attach xarm gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="uf850__moveit__fake_8launch_8py.html">uf850_moveit_fake.launch.py</a> [add_gripper:=true] ```</p>
<ul>
<li><p class="startli">【real arm】Launch moveit, controlling robot in rviz. <br  />
</p>
<p class="startli">``&lsquo;bash $ cd ~/dev_ws/ </p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md81"></a>
For xArm(xarm6 as example): set 'add_gripper=true&rsquo; to attach xArm gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="xarm6__moveit__realmove_8launch_8py.html">xarm6_moveit_realmove.launch.py</a> robot_ip:=192.168.1.117 [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md82"></a>
For Lite6: set 'add_gripper=true' to attach Lite6 gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="lite6__moveit__realmove_8launch_8py.html">lite6_moveit_realmove.launch.py</a> robot_ip:=192.168.1.161 [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md83"></a>
For UFACTORY850: set 'add_gripper=true' to attach xarm gripper model</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="uf850__moveit__realmove_8launch_8py.html">uf850_moveit_realmove.launch.py</a> robot_ip:=192.168.1.181 [add_gripper:=true] ```</p>
<ul>
<li><p class="startli">【Dual simulated】Launch single moveit process, and controlling two xArms in one rviz. <br  />
</p>
<p class="startli">``&lsquo;bash $ cd ~/dev_ws/ </p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md84"></a>
set 'add_gripper=true&rsquo; to attach xArm gripper model</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md85"></a>
'add_gripper_1': can separately decide whether to attach gripper for left arm，default for same value with 'add_gripper'</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md86"></a>
'add_gripper_2': can separately decide whether to attach gripper for right arm，default for same value with 'add_gripper'</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md87"></a>
'dof_1': can separately configure the model DOF of left arm，default to be the same DOF specified in filename.</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md88"></a>
'dof_2': can separately configure the model DOF of right arm，default to be the same DOF specified in filename.</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md89"></a>
For xArm (xarm6 here):</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__xarm6__moveit__fake_8launch_8py.html">dual_xarm6_moveit_fake.launch.py</a> [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md90"></a>
For Lite6:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__lite6__moveit__fake_8launch_8py.html">dual_lite6_moveit_fake.launch.py</a> [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md91"></a>
For UFACTORY850:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__uf850__moveit__fake_8launch_8py.html">dual_uf850_moveit_fake.launch.py</a> [add_gripper:=true] ```</p>
<ul>
<li><p class="startli">【Dual real arm】Launch single moveit process, and controlling two xArms in one rviz. <br  />
</p>
<p class="startli">``&lsquo;bash $ cd ~/dev_ws/ </p>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md92"></a>
'robot_ip_1&rsquo;: IP address of left arm</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md93"></a>
'robot_ip_2': IP address of right arm</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md94"></a>
set 'add_gripper=true' to attach xArm gripper model</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md95"></a>
'add_gripper_1': can separately decide whether to attach gripper for left arm，default for same value with 'add_gripper'</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md96"></a>
'add_gripper_2': can separately decide whether to attach gripper for right arm，default for same value with 'add_gripper'</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md97"></a>
'dof_1': can separately configure the model DOF of left arm，default to be the same DOF specified in filename.</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md98"></a>
'dof_2': can separately configure the model DOF of right arm，default to be the same DOF specified in filename.</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md99"></a>
For xArm (xarm6 here):</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__xarm6__moveit__realmove_8launch_8py.html">dual_xarm6_moveit_realmove.launch.py</a> robot_ip_1:=192.168.1.117 robot_ip_2:=192.168.1.203 [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md100"></a>
For Lite6:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__lite6__moveit__realmove_8launch_8py.html">dual_lite6_moveit_realmove.launch.py</a> robot_ip_1:=192.168.1.117 robot_ip_2:=192.168.1.203 [add_gripper:=true]</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md101"></a>
For UFACTORY850:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="dual__uf850__moveit__realmove_8launch_8py.html">dual_uf850_moveit_realmove.launch.py</a> robot_ip_1:=192.168.1.181 robot_ip_2:=192.168.1.182 [add_gripper:=true] ```</p>
<ul>
<li><p class="startli">### 5.7 <a class="el" href="namespacexarm__planner.html">xarm_planner</a> This package provides functions for controlling xArm (simulated or real arm) through moveit API <br  />
</p>
<div class="fragment"><div class="line">$ cd ~/dev_ws/</div>
<div class="line"># 【simulated xArm】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner xarm6_planner_fake.launch.py [add_gripper:=true]</div>
<div class="line"># 【real xArm】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner xarm6_planner_realmove.launch.py robot_ip:=192.168.1.117 [add_gripper:=true]</div>
<div class="line"> </div>
<div class="line"># 【simulated Lite6】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner lite6_planner_fake.launch.py [add_gripper:=true]</div>
<div class="line"># 【real Lite6】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner lite6_planner_realmove.launch.py robot_ip:=192.168.1.117 [add_gripper:=true]</div>
<div class="line"> </div>
<div class="line"># 【simulated UFACTORY850】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner uf850_planner_fake.launch.py [add_gripper:=true]</div>
<div class="line"># 【real UFACTORY850】launch xarm_planner_node</div>
<div class="line">$ ros2 launch xarm_planner uf850_planner_realmove.launch.py robot_ip:=192.168.1.181 [add_gripper:=true]</div>
<div class="line"> </div>
<div class="line"># In another terminal, run test program (control through API, specify &#39;robot_type&#39; as &#39;xarm&#39; or &#39;lite&#39; or &#39;uf850&#39;)</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_planner_api_joint.launch.py dof:=6 robot_type:=&lt;xarm | lite | uf850&gt;</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_planner_api_pose.launch.py dof:=6 robot_type:=&lt;xarm | lite | uf850&gt;</div>
</div><!-- fragment --><p class="startli">Below additional tests are just for xArm: </p><div class="fragment"><div class="line"># run test program（control through service）</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_planner_client_joint.launch.py dof:=6</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_planner_client_pose.launch.py dof:=6</div>
<div class="line"> </div>
<div class="line"># run test program（control gripper through API）</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_gripper_planner_api_joint.launch.py dof:=6</div>
<div class="line"> </div>
<div class="line"># run test program（control gripper through service）</div>
<div class="line">$ ros2 launch xarm_planner test_xarm_gripper_planner_client_joint.launch.py dof:=6</div>
</div><!-- fragment --></li>
<li>### 5.8 xarm_gazebo This package is for supporting xArm simulation with Gazobo. <br  />
 <em><b>Notice:</b></em> <br  />
 (1) Installation of <a href="https://github.com/ros-simulation/gazebo_ros2_control.git">gazebo_ros2_control</a> from source may be needed, as well as setting up environment variables of gazebo_ros2_control. <br  />
 (2) <a href="https://github.com/roboticsgroup/roboticsgroup_upatras_gazebo_plugins">minic_joint_plugin</a> was developed for ROS1, we have modified a version for ROS2 compatibility and it is already integrated in this package for xArm Gripper simulation. <br  />
<ul>
<li>Testing xarm on gazebo independently: ```bash $ cd ~/dev_ws/ </li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md102"></a>
For xArm (xarm6 here):</h1>
<p>$ ros2 launch xarm_gazebo <a class="el" href="xarm6__beside__table__gazebo_8launch_8py.html">xarm6_beside_table_gazebo.launch.py</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md103"></a>
For Lite6:</h1>
<p>$ ros2 launch xarm_gazebo <a class="el" href="lite6__beside__table__gazebo_8launch_8py.html">lite6_beside_table_gazebo.launch.py</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md104"></a>
For UFACTORY850:</h1>
<p>$ ros2 launch xarm_gazebo <a class="el" href="uf850__beside__table__gazebo_8launch_8py.html">uf850_beside_table_gazebo.launch.py</a> ```</p>
<ul>
<li>Simulation with moveit+gazebo (xArm controlled by moveit). ```bash $ cd ~/dev_ws/ </li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md105"></a>
For xArm (xarm6 here):</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="xarm6__moveit__gazebo_8launch_8py.html">xarm6_moveit_gazebo.launch.py</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md106"></a>
For Lite6:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="lite6__moveit__gazebo_8launch_8py.html">lite6_moveit_gazebo.launch.py</a></p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md107"></a>
For UFACTORY850:</h1>
<p>$ ros2 launch xarm_moveit_config <a class="el" href="uf850__moveit__gazebo_8launch_8py.html">uf850_moveit_gazebo.launch.py</a> ```</p><ul>
<li>### 5.9 <a class="el" href="namespacexarm__moveit__servo.html">xarm_moveit_servo</a> This package serves as a demo for jogging xArm with devices such as joystick, through <a href="http://moveit2_tutorials.picknik.ai/doc/realtime_servo/realtime_servo_tutorial.html">moveit_servo</a>.<ul>
<li><p class="startli">Controlling with <b>XBOX360</b> joystick:</p><ul>
<li>left stick for X and Y direction. <br  />
</li>
<li>right stick for ROLL and PITCH adjustment. <br  />
</li>
<li>left and right trigger (LT/RT) for Z direction. <br  />
</li>
<li>left and right bumper (LB/RB) for YAW adjustment. <br  />
</li>
<li>D-PAD for controlling joint1 and joint2. <br  />
</li>
<li>buttons X and B for controlling last joint. <br  />
</li>
<li>buttons Y and A for controlling second last joint. <br  />
</li>
</ul>
<p class="startli">```bash $ cd ~/dev_ws/ </p>
</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md108"></a>
XBOX Wired -&gt; joystick_type=1</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md109"></a>
XBOX Wireless -&gt; joystick_type=2</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md110"></a>
For controlling simulated xArm:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__moveit__servo.html">xarm_moveit_servo</a> <a class="el" href="xarm__moveit__servo__fake_8launch_8py.html">xarm_moveit_servo_fake.launch.py</a> joystick_type:=1 </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md111"></a>
Or controlling simulated Lite6:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__moveit__servo.html">xarm_moveit_servo</a> <a class="el" href="lite6__moveit__servo__fake_8launch_8py.html">lite6_moveit_servo_fake.launch.py</a> joystick_type:=1 </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md112"></a>
Or controlling simulated UFACTORY850:</h1>
<p>$ ros2 launch <a class="el" href="namespacexarm__moveit__servo.html">xarm_moveit_servo</a> <a class="el" href="uf850__moveit__servo__fake_8launch_8py.html">uf850_moveit_servo_fake.launch.py</a> joystick_type:=1</p>
<pre class="fragment">    # For controlling real xArm: (use xArm 5 as example)
    $ ros2 launch xarm_moveit_servo xarm_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123 dof:=5 joystick_type:=1
    # Or controlling real Lite6:
    $ ros2 launch xarm_moveit_servo lite6_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123 joystick_type:=1
    # Or controlling real UFACTORY850:
    $ ros2 launch xarm_moveit_servo uf850_moveit_servo_realmove.launch.py robot_ip:=192.168.1.181 joystick_type:=1
    ```

- Controlling with __3Dconnexion SpaceMouse Wireless__:
    - 6 DOFs of the mouse are mapped for controlling X/Y/Z/ROLL/PITCH/YAW  
    - Left button clicked for just X/Y/Z adjustment  
    - Right button clicked for just ROLL/PITCH/YAW adjustment  

    ```bash
    $ cd ~/dev_ws/
    # For controlling simulated xArm:
    $ ros2 launch xarm_moveit_servo xarm_moveit_servo_fake.launch.py joystick_type:=3
    # Or controlling simulated Lite6:
    $ ros2 launch xarm_moveit_servo lite6_moveit_servo_fake.launch.py joystick_type:=3
    # Or controlling simulated UFACTORY850:
    $ ros2 launch xarm_moveit_servo uf850_moveit_servo_fake.launch.py joystick_type:=3

    # For controlling real xArm: (use xArm 5 as example)
    $ ros2 launch xarm_moveit_servo xarm_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123 dof:=5 joystick_type:=3
    # Or controlling real Lite6:
    $ ros2 launch xarm_moveit_servo lite6_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123 joystick_type:=3
    # Or controlling real UFACTORY850:
    $ ros2 launch xarm_moveit_servo uf850_moveit_servo_realmove.launch.py robot_ip:=192.168.1.181 joystick_type:=3
    ```

- Controlling with __PC keyboard__:
    ```bash
    $ cd ~/dev_ws/
    # For controlling simulated xArm:
    $ ros2 launch xarm_moveit_servo xarm_moveit_servo_fake.launch.py dof:=6
    # Or controlling simulated Lite6:
    $ ros2 launch xarm_moveit_servo lite6_moveit_servo_fake.launch.py
    # Or controlling simulated UFACTORY850:
    $ ros2 launch xarm_moveit_servo uf850_moveit_servo_fake.launch.py

    # For controlling real xArm: (use xArm 5 as example)
    $ ros2 launch xarm_moveit_servo xarm_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123 dof:=5
    # Or for controlling real Lite6:
    $ ros2 launch xarm_moveit_servo lite6_moveit_servo_realmove.launch.py robot_ip:=192.168.1.123
    # Or for controlling real UFACTORY850:
    $ ros2 launch xarm_moveit_servo uf850_moveit_servo_realmove.launch.py robot_ip:=192.168.1.181

    # Then in another terminal, run keyboad input node:
    $ ros2 run xarm_moveit_servo xarm_keyboard_input
    ```
    Please note that Moveit Servo may consider the home position as singularity point, then try with joint motion first.  
</pre><ul>
<li>### 5.10 xarm_vision For simple demonstrations of vision application development with xArm, including hand-eye calibration and object detection and grasping. Examples are based on <a href="https://www.intelrealsense.com/depth-camera-d435i/">Intel RealSense D435i</a> depth camera.<ul>
<li>#### 5.10.1 Installation of dependent packages:<ul>
<li>First enter the workspace source directory: <span class="tt">bash
            $ cd ~/dev_ws/src/
            </span></li>
<li>##### Install RealSense developer library and ROS package： Please refer to the installation steps at <a href="https://github.com/IntelRealSense/realsense-ros/tree/ros2-master">official webpage</a>. <span class="tt">bash
            $ git clone -b ros2-master <a href="https://github.com/IntelRealSense/realsense-ros.git">https://github.com/IntelRealSense/realsense-ros.git</a>
            </span></li>
<li>##### Install 'aruco_ros', for hand-eye calibration： Refer to <a href="https://github.com/pal-robotics/aruco_ros/tree/humble-devel">official Github</a>: <span class="tt">bash
            $ git clone -b humble-devel <a href="https://github.com/pal-robotics/aruco_ros.git">https://github.com/pal-robotics/aruco_ros.git</a>
            </span></li>
<li>##### Install 'easy_handeye2', for hand-eye calibration： Refer to <a href="https://github.com/marcoesposito1988/easy_handeye2">official Github</a>: <span class="tt">bash
            $ git clone <a href="https://github.com/marcoesposito1988/easy_handeye2.git">https://github.com/marcoesposito1988/easy_handeye2.git</a>
            </span></li>
<li>##### Install 'find_object_2d', for object detection： Refer to <a href="https://github.com/introlab/find-object/tree/humble-devel">official Github</a>: <span class="tt">bash
            $ sudo apt-get install ros-humble-find-object-2d
            </span></li>
<li>##### Install other dependencies： <span class="tt">bash
            $ cd ~/dev_ws/src
            $ rosdep update
            $ rosdep install --from-paths . --ignore-src --rosdistro $ROS_DISTRO -y
            </span></li>
<li>##### Build the whole workspace： <span class="tt">bash
            $ colcon build
            </span></li>
</ul>
</li>
<li><p class="startli">#### 5.10.2 Hand-eye Calibration Demo： If attaching RealSense D435i camera at tool end of xArm, with mechanical adapters, making a "**eye-on-hand**"(or eye-in-hand) configuration，the following launch file can be used and modified for hand-eye calibration: (make sure the camera communication is functional and robot is properly switched on)</p>
<p class="startli"><span class="tt">bash 
@section autotoc_md113 xArm 5/6/7
        $ ros2 launch d435i_xarm_setup <a class="el" href="d435i__robot__auto__calib_8launch_8py.html">d435i_robot_auto_calib.launch.py</a> robot_type:=xarm dof:=your_xArm_DOF robot_ip:=your_xArm_IP
@section autotoc_md114 Lite6
        $ ros2 launch d435i_xarm_setup <a class="el" href="d435i__robot__auto__calib_8launch_8py.html">d435i_robot_auto_calib.launch.py</a> robot_type:=lite dof:=6 robot_ip:=your_xArm_IP
@section autotoc_md115 UFACTORY850
        $ ros2 launch d435i_xarm_setup <a class="el" href="d435i__robot__auto__calib_8launch_8py.html">d435i_robot_auto_calib.launch.py</a> robot_type:=uf850 dof:=6 robot_ip:=your_xArm_IP
        </span></p>
<p class="startli">Note: for xArm/UF850 produced <b>after August 2023</b>, kinematic calibration can be added to the URDF model, you can specify <span class="tt">kinematics_suffix</span> parameter for better accuracy. <br  />
</p>
<p class="startli">The <span class="tt">aruco Marker</span> used inside can be downloaded <a href="https://chev.me/arucogen/">here</a>, please remember the <span class="tt">marker ID</span> and <span class="tt">marker size</span> and modify them in the launch file accordingly. Refer to <a href="https://github.com/IFL-CAMP/easy_handeye#calibration">official</a>or other usage instructions online and finish the calibration with the GUI. <br  />
</p>
<p class="startli">If calculation result is confirmed and saved，it will appear by default under <span class="tt">~/.ros2/easy_handeye2/calibrations/</span> directory and can be used for transferring object coordinates to base frame. If the <a href="https://www.ufactory.cc/products/xarm-camera-module-2020">camera_stand</a> provided by UFACTORY is used for fixing camera, some sample calibration result are stored at <span class="tt">xarm_vision/d435i_xarm_setup/config/</span> for this case. <br  />
</p>
</li>
</ul>
</li>
</ul>
<h5 class="doxsection"><a class="anchor" id="autotoc_md116"></a>
Precautions for Hand-eye Calibration:</h5>
<p>Since <span class="tt">easy_handeye2</span> does not generate the robot arm position by default, we can control the robot arm to different positions through the xarm studio control interface or enable drag teaching after starting the above command, and then collect data through the "__Take Sample__" in the hand-eye calibration window. After collecting, the result will be automatically calculated. After collecting about 17 data, save it through "__Save__" (by default, save it in <span class="tt">~/.ros2/easy_handeye2/calibrations/</span>). It is recommended to rotate the rpy as much as possible to ensure that the calibration plate is within the field of view for the position of the robotic arm during each acquisition.</p><ul>
<li>The angle between the rotation axes of the two movements should be as large as possible</li>
<li>The rotation angle corresponding to the rotation matrix of each movement should be as large as possible</li>
<li>The distance from the camera center to the calibration plate should be as small as possible</li>
<li>The distance moved by the end of the robot arm in each movement should be as small as possible</li>
</ul>
<p>#### 5.10.3 Vision Guided Grasping Demo: <a href="http://introlab.github.io/find-object/"><em><b>find_object_2d</b></em></a> is used for this demo for simple object detection and grasping. Hardware used in this part: RealSense D435i depth camera, UFACTORY camera stand and the xArm Gripper(Vacuum Gripper for Lite6). <br  />
</p>
<p>Use moveit to drive xArm's motion，recommended for singularity and collision free execution, but will require a reliable network connection. <br  />
 ```bash </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md117"></a>
xArm 5/6/7</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__moveit__planner_8launch_8py.html">d435i_findobj2d_robot_moveit_planner.launch.py</a> robot_type=xarm dof:=your_xArm_DOF robot_ip:=your_xArm_IP </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md118"></a>
Lite6</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__moveit__planner_8launch_8py.html">d435i_findobj2d_robot_moveit_planner.launch.py</a> robot_type=lite dof:=6 robot_ip:=your_xArm_IP </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md119"></a>
UFACTORY850</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__moveit__planner_8launch_8py.html">d435i_findobj2d_robot_moveit_planner.launch.py</a> robot_type=uf850 dof:=6 robot_ip:=your_xArm_IP</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md120"></a>
The default calibration parameters are ~/.ros2/easy_handeye2/calibrations/{robot_type}_rs_on_hand_calibration.calib</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md121"></a>
If you need to specify the startup parameter calib_filename, the calibration parameters recorded in the d435i_xarm_setup/config/{calib_filename}.calib file will be used</h1>
<p><span class="tt">
        If target object can be properly detected, to run the Grasping node:  \ilinebr&lt;br&gt;
        </span>bash </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md122"></a>
xArm 5/6/7</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__moveit__planner_8launch_8py.html">grasp_node_robot_moveit_planner.launch.py</a> robot_type=xarm dof:=your_xArm_DOF </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md123"></a>
Lite6</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__moveit__planner_8launch_8py.html">grasp_node_robot_moveit_planner.launch.py</a> robot_type=lite dof:=6 </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md124"></a>
UFACTORY850</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__moveit__planner_8launch_8py.html">grasp_node_robot_moveit_planner.launch.py</a> robot_type=uf850 dof:=6 ``` For node program source code, refer to: d435i_xarm_setup/src/<a href="./xarm_vision/d435i_xarm_setup/src/findobj_grasp_moveit_planner.cpp">findobj_grasp_moveit_planner.cpp</a>. <br  />
</p>
<p>2.Alternatively, to drive xArm motion with ros service provided by '<a class="el" href="namespacexarm__api.html">xarm_api</a>', in this way, real-time performance of network will not be required so strict as moveit way, but execution may fail in the middle if singularity or self-collision is about to occur. ```bash </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md125"></a>
xArm 5/6/7</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__api_8launch_8py.html">d435i_findobj2d_robot_api.launch.py</a> robot_type=xarm dof:=your_xArm_DOF robot_ip:=your_xArm_IP </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md126"></a>
Lite6</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__api_8launch_8py.html">d435i_findobj2d_robot_api.launch.py</a> robot_type=lite dof:=6 robot_ip:=your_xArm_IP </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md127"></a>
UFACTORY850</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="d435i__findobj2d__robot__api_8launch_8py.html">d435i_findobj2d_robot_api.launch.py</a> robot_type=uf850 dof:=6 robot_ip:=your_xArm_IP</p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md128"></a>
The default calibration parameters are ~/.ros2/easy_handeye2/calibrations/{robot_type}_rs_on_hand_calibration.calib</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md129"></a>
If you need to specify the startup parameter calib_filename, the calibration parameters recorded in the d435i_xarm_setup/config/{calib_filename}.calib file will be used</h1>
<p><span class="tt">
        If target object can be properly detected, to run the Grasping node:  \ilinebr&lt;br&gt;
        </span>bash </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md130"></a>
xArm 5/6/7</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__api_8launch_8py.html">grasp_node_robot_api.launch.py</a> robot_type=xarm dof:=your_xArm_DOF </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md131"></a>
Lite6</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__api_8launch_8py.html">grasp_node_robot_api.launch.py</a> robot_type=lite dof:=6 </p>
<h1 class="doxsection"><a class="anchor" id="autotoc_md132"></a>
UFACTORY850</h1>
<p>$ ros2 launch d435i_xarm_setup <a class="el" href="grasp__node__robot__api_8launch_8py.html">grasp_node_robot_api.launch.py</a> robot_type=uf850 dof:=6 ``` For node program source code, refer to: d435i_xarm_setup/src/<a href="./xarm_vision/d435i_xarm_setup/src/findobj_grasp_xarm_api.cpp">findobj_grasp_xarm_api.cpp</a>. <br  />
</p>
<p><em><b>Please read and comprehend the source code and make necessary modifications before real application test</b></em>, necessary modifications include preparation pose, grasping orientation, grasping depth, motion speed and so on. The identification target name in the code is "object_1", which corresponds to <span class="tt">1.png</span> in /objects directory, users can add their own target in "find_object_2d" GUI, then modify the <span class="tt">source_frame</span> inside the code, for costomized application. <br  />
</p>
<p><em><b>Tips</b></em>: make sure the background is clean and the color is distinguished from the object, detection success rate can be higher if the target object has rich texture (features).</p>
<ul>
<li>#### 5.10.4 Adding RealSense D435i model to simulated xArm： For installation with camera stand provided by UFACTORY, the cam model can be attached by following modifications (use xarm7 as example): <br  />
 <span class="tt">bash
        $ ros2 launch xarm_moveit_config xarm7_moveit_fake.launch add_realsense_d435i:=true
        </span></li>
</ul>
<h2 class="doxsection"><a class="anchor" id="autotoc_md133"></a>
6. Instruction on major launch arguments</h2>
<ul>
<li><b>robot_ip</b>, IP address of xArm, needed when controlling real hardware.</li>
<li><b>report_type</b>, default: normal. Data report type, supported types are: normal/rich/dev, different types will report with different data contents and frequency.</li>
<li><b>dof</b>, default: 7. Degree of freedom (DOF) of robot arm，no need to specify explicitly unless necessary. For dual arm launch files(with <span class="tt">dual_</span> prefix), DOF can be specified through:<ul>
<li><b>dof_1</b></li>
<li><b>dof_2</b></li>
</ul>
</li>
<li><b>velocity_control</b>, default: false. Whether to control with velocity interface. (Otherwise, use position interface)</li>
<li><b>add_realsense_d435i</b>, default: false. <br  />
 Whether to load the realsense D435i camera model at the end. For dual arm launch files(with <span class="tt">dual_</span> prefix), it can be specified through:<ul>
<li><b>add_realsense_d435i_1</b></li>
<li><b>add_realsense_d435i_2</b></li>
</ul>
</li>
<li><b>add_gripper</b>, default: false. Whether to include UFACTORY gripper in the model，it has higher priority than the argument <span class="tt">add_vacuum_gripper</span>. For dual arm launch files(with <span class="tt">dual_</span> prefix), it can be specified through:<ul>
<li><b>add_gripper_1</b></li>
<li><b>add_gripper_2</b></li>
</ul>
</li>
<li><b>add_bio_gripper</b>, default: false. Whether to include BIO gripper in the model，it has higher priority than the argument <span class="tt">add_vacuum_gripper</span>, <span class="tt">add_gripper</span> must be false in order to set vacuum gripper to be true. For dual arm launch files(with <span class="tt">dual_</span> prefix), it can be specified through:<ul>
<li><b>add_bio_gripper_1</b></li>
<li><b>add_bio_gripper_2</b></li>
</ul>
</li>
<li><b>add_vacuum_gripper</b>, default: false. Whether to include UFACTRORY vacuum gripper in the model，<span class="tt">add_gripper</span> must be false in order to set vacuum gripper to be true. For dual arm launch files(with <span class="tt">dual_</span> prefix), it can be specified through:<ul>
<li><b>add_vacuum_gripper_1</b></li>
<li><b>add_vacuum_gripper_2</b></li>
</ul>
</li>
<li><p class="startli"><b>add_other_geometry</b>, default: false. Whether to add other geometric model as end-tool, <span class="tt">add_gripper</span> and <span class="tt">add_vacuum_gripper</span> has to be false in order to set it to be true.</p><ul>
<li><b>geometry_type</b>, default: box, effective when <span class="tt">add_other_geometry=true</span>. <br  />
 geometry type to be added as end-tool，valid types: box/cylinder/sphere/mesh. <br  />
</li>
<li><b>geometry_mass</b>, unit: kg，default value: 0.1 <br  />
 model mass.</li>
<li><b>geometry_height</b>, unit: m，default value: 0.1 <br  />
 specifying geometry hight，effective when geometry_type=box/cylinder/sphere. <br  />
</li>
<li><b>geometry_radius</b>, unit: m，default value: 0.1 <br  />
 specifying geometry radius, effective when geometry_type=cylinder/sphere. <br  />
</li>
<li><b>geometry_length</b>, unit: m，default value: 0.1 <br  />
 specifying geometry length, effective when geometry_type=box. <br  />
</li>
<li><b>geometry_width</b>, unit: m，default value: 0.1 <br  />
 specifying geometry width,effective when geometry_type=box. <br  />
</li>
<li><b>geometry_mesh_filename</b>, filename of the specified mesh model，effective when geometry_type=mesh. <br  />
 <em><b>This file needs to be put in <span class="tt">xarm_description/meshes/other/</span> folder.</b></em> Such that full directory will not be needed in filename specification. <br  />
</li>
<li><b>geometry_mesh_origin_xyz</b>, default: "0 0 0" <br  />
</li>
<li><b>geometry_mesh_origin_rpy</b>, default: "0 0 0" <br  />
 transformation from end-flange coordinate frame to geometry model origin coordinate frame, effective when <span class="tt">geometry_type=mesh</span>. Example: geometry_mesh_origin_xyz:='"0.05 0.0 0.0"'. <br  />
</li>
<li><b>geometry_mesh_tcp_xyz</b>, default: "0 0 0" <br  />
</li>
<li><b>geometry_mesh_tcp_rpy</b>, default: "0 0 0" <br  />
 transformation from geometry model origin frame to geometry model tip ("Tool Center Point") frame, effective when <span class="tt">geometry_type=mesh</span>. Example: geometry_mesh_tcp_rpy:='"0.0 0.0 1.5708"'. <br  />
</li>
<li><p class="startli"><b>Example of adding customized end tool (Cylinder):</b> <br  />
</p>
<p class="startli"><span class="tt">bash
        $ ros2 launch xarm_gazebo <a class="el" href="xarm6__beside__table__gazebo_8launch_8py.html">xarm6_beside_table_gazebo.launch.py</a> add_other_geometry:=true geometry_type:=cylinder geometry_height:=0.075 geometry_radius:=0.045
        </span></p>
</li>
</ul>
<p class="startli">For dual arm launch files(with <span class="tt">dual_</span> prefix), here are the total arguments that can be configured: <br  />
</p><ul>
<li><b>add_other_geometry_1</b></li>
<li><b>add_other_geometry_2</b></li>
<li><b>geometry_type_1</b></li>
<li><b>geometry_type_2</b></li>
<li><b>geometry_mass_1</b></li>
<li><b>geometry_mass_2</b></li>
<li><b>geometry_height_1</b></li>
<li><b>geometry_height_2</b></li>
<li><b>geometry_radius_1</b>,</li>
<li><b>geometry_radius_2</b>,</li>
<li><b>geometry_length_1</b></li>
<li><b>geometry_length_2</b></li>
<li><b>geometry_width_1</b></li>
<li><b>geometry_width_2</b></li>
<li><b>geometry_mesh_filename_1</b></li>
<li><b>geometry_mesh_filename_2</b></li>
<li><b>geometry_mesh_origin_xyz_1</b></li>
<li><b>geometry_mesh_origin_xyz_2</b></li>
<li><b>geometry_mesh_origin_rpy_1</b></li>
<li><b>geometry_mesh_origin_rpy_2</b></li>
<li><b>geometry_mesh_tcp_xyz_1</b></li>
<li><b>geometry_mesh_tcp_xyz_2</b></li>
<li><b>geometry_mesh_tcp_rpy_1</b></li>
<li><b>geometry_mesh_tcp_rpy_2</b></li>
</ul>
</li>
<li><b>kinematics_suffix</b>: Specify joint Kinematics parameter file suffix<ul>
<li>Generation of Kinematics parameter file: ```bash cd src/xarm_ros/xarm_description/config/kinematics python <a class="el" href="gen__kinematics__params_8py.html">gen_kinematics_params.py</a> {robot_ip} {kinematics_suffix}</li>
</ul>
</li>
</ul>
<h1 class="doxsection"><a class="anchor" id="autotoc_md134"></a>
Note</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md135"></a>
1. robot_ip represents the IP of the robot arm. You need to connect to the robot arm to obtain the actual parameters.</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md136"></a>
2. kinematics_suffix represents the suffix of the generated parameter file. If successful, the configuration file will be generated in the xarm_description/config/kinematics/user directory. If kinematics_suffix is AAA, then the corresponding file name is as follows</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md137"></a>
xarm5: xarm_description/config/kinematics/user/xarm5_kinematics_AAA.yaml</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md138"></a>
xarm6: xarm_description/config/kinematics/user/xarm6_kinematics_AAA.yaml</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md139"></a>
xarm7: xarm_description/config/kinematics/user/xarm7_kinematics_AAA.yaml</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md140"></a>
lite6: xarm_description/config/kinematics/user/lite6_kinematics_AAA.yaml</h1>
<h1 class="doxsection"><a class="anchor" id="autotoc_md141"></a>
uf850: xarm_description/config/kinematics/user/uf850_kinematics_AAA.yaml</h1>
<p>```</p><ul>
<li>Use of Kinematics parameter file: Specify this parameter when starting the launch file<ul>
<li>Note that before specifying this parameter, make sure that the corresponding configuration file exists. If it does not exist, you need to connect the robot arm through a script to generate it. </li>
</ul>
</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_2d3b31f5269641a65ad69fd5e63e7c5f.html">manipulation</a></li><li class="navelem"><a href="dir_7789cadc33ffb2720130327e1e043559.html">packages</a></li><li class="navelem"><a href="dir_8a225a6405453e8db1c9c4c5541f862c.html">xarm_ros2</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
